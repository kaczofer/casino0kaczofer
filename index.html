<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>CASH Casino V39 SLOW</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;background:#0f172a;color:#fff;font-family:Arial;display:flex;justify-content:center}
.container{width:720px;margin-top:20px}
.card{background:#111827;padding:20px;border-radius:16px;margin-bottom:20px}
button{padding:8px 14px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;margin:5px}
.green{background:#22c55e;color:#000}
.blue{background:#3b82f6}
.red{background:#ef4444}
.grid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-top:15px}
.tile{aspect-ratio:1;background:#1f2937;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer}
canvas{background:#0b1220;border-radius:16px;margin-top:10px}
.slots{display:flex;margin-top:10px}
.slot{flex:1;margin:2px;padding:6px 0;text-align:center;border-radius:6px;font-size:12px;font-weight:bold}
input{padding:6px;border-radius:6px;border:none;margin:5px}
</style>
</head>
<body>

<div class="container">

<div class="card" id="authBox">
<h2>CASH Casino ðŸŽ°</h2>
<input id="loginUser" placeholder="Login">
<input id="loginPass" type="password" placeholder="HasÅ‚o"><br>
<button class="green" onclick="register()">Register</button>
<button class="blue" onclick="login()">Login</button>
<div id="authMsg"></div>
</div>

<div id="casino" style="display:none">

<div class="card">
<h3>Witaj: <span id="username"></span></h3>
<h3>Saldo: $<span id="balance"></span></h3>
<button class="green" onclick="showMines()">Mines</button>
<button class="blue" onclick="showPlinko()">Plinko</button>
<button class="red" onclick="logout()">Logout</button>
</div>

<div class="card" id="minesBox" style="display:none">
<button onclick="back()">Back</button>
<h3>Mines ðŸ’£</h3>
Bet: <input id="betM" type="number" value="100"><br>
Bombs: <input type="range" min="1" max="20" value="5"
oninput="bombs=this.value;bVal.innerText=this.value">
<span id="bVal">5</span><br>
Multiplier: x<span id="mult">1.00</span><br>
<button onclick="startM()">Start</button>
<button onclick="cashout()">Cashout</button>
<div class="grid" id="grid"></div>
<div id="minesResult"></div>
</div>

<div class="card" id="plinkoBox" style="display:none">
<button onclick="back()">Back</button>
<h3>Plinko ðŸŽ²</h3>
Bet: <input id="betP" type="number" value="100">
<button onclick="dropBall()">Drop</button>
<canvas id="canvas" width="700" height="500"></canvas>
<div class="slots" id="slots"></div>
</div>

</div>
</div>

<script>
// ===== ACCOUNTS =====
let currentUser=null;
function getUsers(){return JSON.parse(localStorage.getItem("users")||"{}")}
function saveUsers(u){localStorage.setItem("users",JSON.stringify(u))}

function register(){
 let users=getUsers();
 let u=loginUser.value;
 let p=loginPass.value;
 if(!u||!p)return;
 if(users[u]){authMsg.innerText="UÅ¼ytkownik istnieje";return;}
 users[u]={pass:p,balance:1000};
 saveUsers(users);
 authMsg.innerText="Zarejestrowano!";
}

function login(){
 let users=getUsers();
 let u=loginUser.value;
 let p=loginPass.value;
 if(!users[u]||users[u].pass!==p){authMsg.innerText="BÅ‚Ä™dne dane";return;}
 currentUser=u;
 username.innerText=u;
 balance.innerText=users[u].balance;
 authBox.style.display="none";
 casino.style.display="block";
}

function logout(){location.reload()}

function updateBalance(v){
 let users=getUsers();
 users[currentUser].balance+=v;
 saveUsers(users);
 balance.innerText=users[currentUser].balance;
}

function showMines(){minesBox.style.display="block";plinkoBox.style.display="none"}
function showPlinko(){plinkoBox.style.display="block";minesBox.style.display="none"}
function back(){minesBox.style.display="none";plinkoBox.style.display="none"}

// ===== MINES =====
let minePositions=[],gameActive=false,bet=0,revealed=0,bombs=5;

function calculateMult(){
 const total=25;
 const safe=total-bombs;
 if(revealed===0)return 1;
 return total/(safe-revealed+1);
}

function startM(){
 bet=parseInt(betM.value);
 if(bet<=0||bet>getUsers()[currentUser].balance)return;
 updateBalance(-bet);
 minePositions=[];revealed=0;gameActive=true;
 mult.innerText="1.00";
 minesResult.innerText="";
 grid.innerHTML="";
 while(minePositions.length<bombs){
  let r=Math.floor(Math.random()*25);
  if(!minePositions.includes(r))minePositions.push(r);
 }
 for(let i=0;i<25;i++){
  let t=document.createElement("div");
  t.className="tile";
  t.onclick=()=>clickTile(t,i);
  grid.appendChild(t);
 }
}

function clickTile(t,i){
 if(!gameActive)return;
 if(minePositions.includes(i)){
  t.innerText="ðŸ’£";
  minesResult.innerText="PrzegraÅ‚eÅ› "+bet+"$";
  gameActive=false;
 }else{
  t.innerText="ðŸ’Ž";
  revealed++;
  mult.innerText=calculateMult().toFixed(2);
 }
}

function cashout(){
 if(!gameActive||revealed===0)return;
 let win=Math.floor(bet*calculateMult());
 updateBalance(win);
 minesResult.innerText="WygraÅ‚eÅ› "+win+"$";
 gameActive=false;
}

// ===== PLINKO (VERY SLOW ROLLING) =====
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
let balls=[];
let spawnToggle=true;

const GRAVITY=0.03;      // VERY LOW gravity
const FRICTION=0.995;    // slow rolling
const BOUNCE=0.6;

const multipliers=[0.5,1,1.5,2,3,5,3,2,1.5,1,0.5];

function renderSlots(){
 slots.innerHTML="";
 multipliers.forEach(v=>{
  let d=document.createElement("div");
  d.className="slot";
  d.innerText="x"+v;
  slots.appendChild(d);
 });
}
renderSlots();

let pins=[];
pins.push({x:350,y:70}); // top pin

for(let r=1;r<9;r++){
 for(let c=0;c<=r;c++){
  pins.push({x:350-r*35+c*70,y:80+r*40});
 }
}

function dropBall(){
 let bet2=parseInt(betP.value);
 if(bet2<=0||bet2>getUsers()[currentUser].balance)return;
 updateBalance(-bet2);

 let offset = spawnToggle ? 0.25 : -0.25;
 spawnToggle = !spawnToggle;

 balls.push({
   x:350+offset,
   y:30,
   vx:offset*0.5,
   vy:0,
   r:8,
   bet:bet2
 });
}

function update(){
 ctx.clearRect(0,0,canvas.width,canvas.height);

 ctx.fillStyle="#fff";
 pins.forEach(p=>{
  ctx.beginPath();
  ctx.arc(p.x,p.y,4,0,Math.PI*2);
  ctx.fill();
 });

 balls.forEach((ball,i)=>{

  ball.vy+=GRAVITY;
  ball.vx*=FRICTION;
  ball.vy*=FRICTION;

  ball.y+=ball.vy;
  ball.x+=ball.vx;

  pins.forEach(p=>{
   let dx=ball.x-p.x;
   let dy=ball.y-p.y;
   let dist=Math.sqrt(dx*dx+dy*dy);
   if(dist===0)return;
   let minDist=ball.r+4;
   if(dist<minDist){
    let nx=dx/dist;
    let ny=dy/dist;
    ball.x=p.x+nx*minDist;
    ball.y=p.y+ny*minDist;
    let dot=ball.vx*nx+ball.vy*ny;
    ball.vx-=2*dot*nx;
    ball.vy-=2*dot*ny;
    ball.vx*=BOUNCE;
    ball.vy*=BOUNCE;
   }
  });

  if(isNaN(ball.x)||isNaN(ball.y)){
   balls.splice(i,1);
   return;
  }

  ctx.beginPath();
  ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
  ctx.fillStyle="#22c55e";
  ctx.fill();

  if(ball.y>490){
   let slotIndex=Math.floor((ball.x/canvas.width)*multipliers.length);
   slotIndex=Math.max(0,Math.min(multipliers.length-1,slotIndex));
   let win=Math.floor(ball.bet*multipliers[slotIndex]);
   updateBalance(win);
   balls.splice(i,1);
  }

 });

 requestAnimationFrame(update);
}
update();
</script>
</body>
</html>
